{"version":3,"sources":["hyperfiddle/electric/impl/runtime.cljc"],"mappings":"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","names":["hyperfiddle.electric.impl.runtime/fail","x","hyperfiddle.electric.impl.runtime/failure","p1__43602#","cljs.core.some_fn","js/hyperfiddle.electric.Failure","hyperfiddle.electric.impl.runtime/pending","js/hyperfiddle.electric.Pending","hyperfiddle.electric.impl.runtime/error","msg","js/Error","hyperfiddle.electric.impl.runtime/pst","e","js/console.error","hyperfiddle.electric.impl.runtime/select-debug-info","debug-info","cljs.core.merge","cljs.core/select-keys","contrib.data/select-ns","hyperfiddle.electric.impl.runtime/check-failure","<x","missionary.core.latest","hyperfiddle.electric.debug/error","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","hyperfiddle.electric.impl.runtime/latest-apply","seq43607","G__43608","cljs.core/first","cljs.core/next","self__5754__auto__","args","cljs.core.apply","missionary.core/latest","f","temp__5802__auto__","err","cljs.core.assoc","e43618","hyperfiddle.electric.impl.runtime/latest-first","cljs.core.partial","y","hyperfiddle.electric.impl.runtime/pure","missionary.core/cp*","cr43629-state","cr43629-place-0","cr43629-exception","e43637","cloroutine.impl/coroutine","G__43639","cljs.core.object_array","cr43629-block-0","hyperfiddle.electric.impl.runtime/empty-event","unused__11938__auto__","self__","G__43647","args43645","cljs.core/aclone","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","hyperfiddle.electric.impl.runtime/It","hyperfiddle.electric.impl.runtime/->It","state","cancel","transfer","_","hyperfiddle.electric.impl.runtime/lift-cancelled","cljs.core/comp","it","js/hyperfiddle","js/hyperfiddle.electric","js/hyperfiddle.electric.impl","js/hyperfiddle.electric.impl.runtime","js/hyperfiddle.electric.impl.runtime.t_hyperfiddle$electric$impl$runtime43664","hyperfiddle.electric.impl.runtime/t_hyperfiddle$electric$impl$runtime43664","_43666","meta43665","G__43672","args43669","hyperfiddle.electric.impl.runtime/->t_hyperfiddle$electric$impl$runtime43664","cljs.core/deref","e43676","js/missionary.Cancelled","hyperfiddle.electric.impl.runtime/signal","missionary.core/signal!","hyperfiddle.electric.impl.runtime/this","cljs.core/volatile!","hyperfiddle.electric.impl.runtime/context-slot-root","hyperfiddle.electric.impl.runtime/context-slot-local-id","hyperfiddle.electric.impl.runtime/context-slot-remote-id","hyperfiddle.electric.impl.runtime/context-slot-pending-rpos","hyperfiddle.electric.impl.runtime/context-slot-pending-wpos","hyperfiddle.electric.impl.runtime/context-slot-pending-buffer","hyperfiddle.electric.impl.runtime/context-slot-frame-store","hyperfiddle.electric.impl.runtime/context-slot-event","hyperfiddle.electric.impl.runtime/context-slot-check","hyperfiddle.electric.impl.runtime/context-slot-notifier","hyperfiddle.electric.impl.runtime/context-slot-terminator","hyperfiddle.electric.impl.runtime/context-slot-incoming","hyperfiddle.electric.impl.runtime/context-slots","hyperfiddle.electric.impl.runtime/tier-slot-parent","hyperfiddle.electric.impl.runtime/tier-slot-position","hyperfiddle.electric.impl.runtime/tier-slot-buffer","hyperfiddle.electric.impl.runtime/tier-slot-size","hyperfiddle.electric.impl.runtime/tier-slot-foreigns","hyperfiddle.electric.impl.runtime/tier-slot-hooks","hyperfiddle.electric.impl.runtime/tier-slot-vars","hyperfiddle.electric.impl.runtime/tier-slot-remote","hyperfiddle.electric.impl.runtime/tier-slots","hyperfiddle.electric.impl.runtime/frame-slot-context","hyperfiddle.electric.impl.runtime/frame-slot-parent","hyperfiddle.electric.impl.runtime/frame-slot-id","hyperfiddle.electric.impl.runtime/frame-slot-position","hyperfiddle.electric.impl.runtime/frame-slot-foreign","hyperfiddle.electric.impl.runtime/frame-slot-static","hyperfiddle.electric.impl.runtime/frame-slot-dynamic","hyperfiddle.electric.impl.runtime/frame-slot-variables","hyperfiddle.electric.impl.runtime/frame-slot-sources","hyperfiddle.electric.impl.runtime/frame-slot-targets","hyperfiddle.electric.impl.runtime/frame-slot-inputs","hyperfiddle.electric.impl.runtime/frame-slot-tiers","hyperfiddle.electric.impl.runtime/frame-slot-constants","hyperfiddle.electric.impl.runtime/frame-slots","hyperfiddle.electric.impl.runtime/input-slot-frame","hyperfiddle.electric.impl.runtime/input-slot-notifier","hyperfiddle.electric.impl.runtime/input-slot-terminator","hyperfiddle.electric.impl.runtime/input-slot-current","hyperfiddle.electric.impl.runtime/input-slot-dirty","hyperfiddle.electric.impl.runtime/input-slot-check","hyperfiddle.electric.impl.runtime/input-slot-pending","hyperfiddle.electric.impl.runtime/input-slot-cancel","hyperfiddle.electric.impl.runtime/input-slots","hyperfiddle.electric.impl.runtime/output-slot-input","hyperfiddle.electric.impl.runtime/output-slot-id","hyperfiddle.electric.impl.runtime/output-slot-iterator","hyperfiddle.electric.impl.runtime/output-slot-current","hyperfiddle.electric.impl.runtime/output-slot-dirty","hyperfiddle.electric.impl.runtime/output-slot-done","hyperfiddle.electric.impl.runtime/output-slot-prev","hyperfiddle.electric.impl.runtime/output-slot-next","hyperfiddle.electric.impl.runtime/output-slot-time","hyperfiddle.electric.impl.runtime/output-slots","G__43719","hyperfiddle.electric.impl.runtime/aswap","args-arr__5794__auto__","argseq__5795__auto__","seq43712","G__43713","G__43714","G__43715","G__43716","G__43717","G__43718","arr","slot","G__43730","a","G__43733","G__43734","b","G__43736","G__43737","G__43738","c","G__43739","G__43740","G__43741","G__43742","ds","hyperfiddle.electric.impl.runtime/doto-aset","k","v","G__43750","hyperfiddle.electric.impl.runtime/make-context","G__43756","cljs.core/identity","cljs.core/transient","hyperfiddle.electric.impl.runtime/make-tier","parent","position","G__43759","hyperfiddle.electric.impl.runtime/make-frame","context","id","foreign","static","dynamic","variable-count","source-count","constant-count","target-count","output-count","input-count","buffer","vars","boot","tier-count","frame","G__43768","cljs.core/count","n__5636__auto__","i","hyperfiddle.electric.impl.runtime.aswap","cljs.core/assoc!","prevs","cljs.core/reduce-kv","m","prev","proc","result","hyperfiddle.electric.impl.runtime/input-ready","input","fexpr__43780","hyperfiddle.electric.impl.runtime/output-dirty","output","dirty","check","fexpr__43790","hyperfiddle.electric.impl.runtime/output-spawn","G__43793","G__43794","fexpr__43792","hyperfiddle.electric.impl.runtime/make-output","hyperfiddle.electric.impl.runtime/input-cancel","fexpr__43807","hyperfiddle.electric.impl.runtime/input-change","hyperfiddle.electric.impl.runtime/input-freeze","fexpr__43815","hyperfiddle.electric.impl.runtime/update-event","seq43819","G__43822","G__43823","G__43824","temp__5806__auto__","event","cljs.core/update","fexpr__43831","hyperfiddle.electric.impl.runtime/input-check","path","hyperfiddle.electric.impl.runtime.update_event","cljs.core/conj","cljs.core._EQ_","wpos","t","p","n","cljs.core/inc","cljs.core/assoc","hyperfiddle.electric.impl.runtime/input-transfer","fexpr__43845","G__43847","fexpr__43848","hyperfiddle.electric.impl.runtime/make-input","deps","cljs.core.reduce","hyperfiddle.electric.impl.runtime/input-spawn","hyperfiddle.electric.impl.runtime/check-unbound-var","hyperfiddle.electric.impl.runtime/static","hyperfiddle.electric.impl.runtime/dynamic","hyperfiddle.electric.impl.runtime/tree","tiers","cljs.core.conj","tier","buf","G__43858","hyperfiddle.electric.impl.runtime/find-scope","s","cljs.core.into","cljs.core/keys","hyperfiddle.electric.impl.runtime/frame-walk-tiers","step","cb","start","size","back","back-inc-size","stop","cljs.core.get","hyperfiddle.electric.impl.runtime/tier-walk-frames","hyperfiddle.electric.impl.runtime/notify-rotate","anchor","cljs.core/contains?","target","hyperfiddle.electric.impl.runtime/array-call","fexpr__43871","hyperfiddle.electric.impl.runtime/frame-dispose","hyperfiddle.electric.impl.runtime/frame-rotate","to","from","cljs.core/compare","j","hyperfiddle.electric.impl.runtime/move","hyperfiddle.electric.impl.runtime/frame-cancel","temp__5808__auto__","pos","hyperfiddle.electric.impl.runtime/acopy","src","src-off","dest","dest-off","hyperfiddle.electric.impl.runtime/constructor","par","cap","G__43874","args43873","hyperfiddle.electric.impl.runtime/FrameIterator","hyperfiddle.electric.impl.runtime/->FrameIterator","hyperfiddle.electric.impl.runtime/constant","ctor","consts","missionary.core/watch","cljs.core.atom","G__43875","G__43876","cljs.core/dissoc!","hyperfiddle.electric.impl.failer/run","hyperfiddle.electric.impl.runtime/inject","<y","foreigns","hyperfiddle.electric.impl.runtime/bind","seq43877","G__43878","e43879","fexpr__43880","hyperfiddle.electric.impl.runtime/with","cljs.core/vreset!","G__43884","hyperfiddle.electric.impl.runtime/clause","G__43886","hyperfiddle.electric.debug/unwrap","G__43888","hyperfiddle.electric.impl.runtime/recover","catch","hyperfiddle.electric.impl.yield2/yield","<c","G__43889","hyperfiddle.electric.impl.runtime/variable","<<x","cr43890-state","cr43890-place-3","missionary.core/unpark","cr43890-place-4","cr43890-place-5","cr43890-place-6","cr43890-place-7","cr43890-block-5","cr43890-block-3","cr43890-exception","e43904","cr43890-block-7","cr43890-place-13","cr43890-block-6","e43905","cr43890-place-12","e43906","cr43890-place-8","cr43890-place-9","cr43890-place-10","cr43890-place-11","cr43890-block-4","missionary.core/switch","e43907","cr43890-place-0","cr43890-place-14","cr43890-place-15","cr43890-place-16","cr43890-block-8","e43911","e43912","cr43890-place-1","cr43890-place-17","e43913","cr43890-block-1","e43914","cr43890-place-2","cr43890-block-2","e43915","G__43916","cr43890-block-0","G__43909","G__43910","fexpr__43908","hyperfiddle.electric.impl.runtime/source","G__43917","hyperfiddle.electric.impl.runtime/target","hyperfiddle.electric.impl.runtime/hook","G__43918","G__43919","cljs.core/dissoc","hyperfiddle.electric.impl.runtime/unbound","hyperfiddle.electric.impl.runtime/subject-at","!","hyperfiddle.electric.impl.runtime/context-ack","rpos","cljs.core/dec","hyperfiddle.electric.impl.runtime/context-cancel","hyperfiddle.electric.impl.runtime/context-transfer","fexpr__43920","larger","split","o","hyperfiddle.electric.impl.runtime/eval-tree-inst","inst","G__43921","cljs.core/Keyword","map__43922","cljs.core/--destructure-map","vec__43923","cljs.core.nth","vec__43926","target-frame","target-slot","source-frame","source-slot","G__43930","G__43931","fexpr__43929","p__43932","vec__43933","hyperfiddle.electric.impl.runtime/eval-change-inst","value","p__43936","vec__43937","hyperfiddle.electric.impl.runtime/eval-freeze-inst","p__43940","map__43941","hyperfiddle.electric.impl.runtime/parse-event","acks","tree","change","freeze","hyperfiddle.electric.impl.runtime/process-incoming-events",">incoming","missionary.core/sample","cljs.core/reduce","hyperfiddle.electric.impl.runtime/write-outgoing-events","write",">events","cr43942-state","cr43942-place-0","cr43942-place-1","cr43942-block-1","missionary.core/fork","cr43942-exception","e43954","cr43942-place-2","cr43942-place-3","cr43942-place-4","cr43942-place-5","cr43942-place-6","cr43942-place-7","cr43942-block-4","cr43942-block-2","e43955","cr43942-place-8","cr43942-place-9","cr43942-place-10","cr43942-block-3","missionary.core/park","e43959","cr43942-place-11","cr43942-block-5","e43962","cr43942-place-12","e43963","e43964","G__43965","cr43942-block-0","missionary.core/ap-run","G__43957","G__43958","fexpr__43956","cljs.core/=","G__43961","fexpr__43960","hyperfiddle.electric.impl.runtime/peer","var-count","?read","hyperfiddle$electric$impl$runtime$peer_$_rec","on-error","missionary.core/reactor-call","missionary.core/stream!","<main","cljs.core.repeat","G__43966","missionary.core/relieve","cljs.core/into","cljs.core/vector","missionary.core/observe","hyperfiddle.electric.impl.runtime/collapse","seq43967","G__43968","G__43969","G__43970","cljs.core/iterate","cljs.core/pop","cljs.core.transduce","cljs.core.comp","cljs.core.map","cljs.core/peek","cljs.core.take","hyperfiddle.electric.impl.runtime/snapshot","seq43971","G__43972","G__43973","env","cljs.core.update","hyperfiddle.electric.impl.runtime/reverse-index","cljs.core/vec","hyperfiddle.electric.impl.runtime/empty-frame","p__43974","map__43975","hyperfiddle.electric.impl.runtime/compile","nop","sub","pub","inject","lift","vget","bind","invoke","do","global","literal","variable","source","constant","main","fns","off","idx","dyn","G__43976","G__43977","G__43978","walk","arg","cljs.core/max","G__43980","G__43981","fexpr__43979","d","G__43982","G__43983","cljs.core/cons","G__43984","cljs.core.symbol","G__43985","G__43986","hyperfiddle.electric.impl.runtime/sym","seq43987","self__5755__auto__","cljs.core/seq","clojure.string.join","hyperfiddle.electric.impl.runtime/emit","prefix","hyperfiddle.electric.impl.runtime.sym","cljs.core.sequence","cljs.core.concat","cljs.core/List","form","cont","_ns","forms","remote","cljs.core.mapv","G__43999","hyperfiddle.electric.impl.runtime/juxt-with","seq43994","G__43995","G__43996","G__43997","G__43998","g","G__44000","G__44001","G__44002","G__44003","G__44004","h","G__44005","G__44006","G__44007","G__44008","G__44009","G__44010","G__44011","G__44012","G__44013","G__44014","G__44015","G__44016","G__44017","G__44018","G__44019","G__44020","G__44021","G__44022","G__44023","G__44024","G__44025","G__44026","G__44027","G__44028","G__44029","js","p1__43988#","p1__43989#","p1__43990#","p1__43991#","p1__43992#","hyperfiddle.electric.impl.runtime/globals","program","cljs.core/tree-seq","cljs.core/coll?","cljs.core.eduction","cljs.core.filter","cljs.core/vector?","p__44030","vec__44031","cljs.core/second","cljs.core.distinct","cljs.core.sort_by","cljs.core.juxt","cljs.core/namespace","cljs.core/name","hyperfiddle.electric.impl.runtime/missing-exports","resolvef","p1__44034#","cljs.core/symbol","hyperfiddle.electric.impl.runtime/dynamic-resolve","nf","G__44036","hyperfiddle.electric.impl.runtime/eval","hyperfiddle.electric.impl.runtime.eval","cljs.core/constantly","ns","G__44041","cljs.core/find-ns","*ns*-orig-val__44042","*ns*-temp-val__44043","cljs.core/*ns*","cljs.core/eval","pubs","G__44038","G__44039","G__44040","res","r","G__44037","cljs.core.ex_info","hyperfiddle.electric.impl.runtime/queue","q"],"sourcesContent":["(ns ^:no-doc hyperfiddle.electric.impl.runtime\n  (:refer-clojure :exclude [eval compile])\n  (:require [hyperfiddle.electric.impl.yield2 :refer [yield]]\n            [hyperfiddle.electric.impl.failer :as failer]\n            [hyperfiddle.electric.impl.local :as l]\n            [hyperfiddle.electric.impl.ir :as ir]\n            [hyperfiddle.electric.debug :as dbg]\n            [missionary.core :as m]\n            [hyperfiddle.rcf :refer [tests]]\n            [clojure.string :as str]\n            [contrib.data :as data])\n  (:import missionary.Cancelled\n           (hyperfiddle.electric Failure Pending Remote)\n           #?(:clj (clojure.lang IFn IDeref Atom))))\n\n;; An Electric program is a tree, which structure is dynamically maintained.\n;; Two peers are synchronized (through a protocol) such that the tree structure is identicaly on both peers.\n;; Two type of nodes:\n;; [Frames] : A piece of DAG with a static structure. Won't be rearanged at runtime. (AKA Static Frame)\n;;            - A set of compiled s-expressions + a set of signals weaving these expressions + N inputs + N outputs\n;;            - A frame has 2 instances, one on client, one on server.\n;;            - Server's outputs are client's inputs and vice-versa.\n;;            - Frames are processes.\n;;            - Image: a stackframe but for a DAG. A stackframe is allocated to compute the result of a function.\n;;              It is volatile (disposable) in a stack-based program. Since Electric is reactive, the frame is not disposable.\n;;              \u00abReactiveFrame\u00bb \u00abDistributed Reactive Frame\u00bb\n;; [Tiers] : For each `new` in a frame, a managed process is created. Tiers are child processes of frames. (AKA Dynamic Frame)\n;;             - Parent process of a tier is always a frame.\n;;             - Parent process of a frame is alawys a tier.\n;;             - Specificity: Frames have a fixed set of children, tiers have a dynamic set of children, they can spawn new frames anytime.\n;;                            Child frames of a tier are positioned (there is a well defined traversal order)\n;;                            Node order (positions) can change at runtime because tiers can spawn dynamically (e.g.: p/for).\n;;             - Some tiers don't have child frames : e.g. (new (m/watch .)), no child frames, no input, no output\n;;             - Some frames don't have child tiers : e.g. a frame without any `new`, no variability.\n;;             - (image: an ordered tree with different kind of nodes at each generation)\n\n;; Network protocol\n;; Each peer streams events to its remote peer via a bidirectional channel. An event is a clojure map with 4 entries :\n;; * :acks is a non-negative integer counting the number of non-empty changesets received by the peer sending the event\n;;   since the previous event was sent.\n;; * :tree is a vector of tree instructions. Order of instructions matters. A tree instruction describes an atomic mutation of the tree, it is a map\n;;   with a mandatory :op entry defining the instruction type and defining the rest of the keyset. Instructions are :\n;;   * :create appends a new frame at the end of a tier, owned by the peer sending the event. The frame constructor is\n;;     defined by the entry :target, the endpoint is defined by the entry :source. Both are ordered pairs of two\n;;     numbers, the frame id and the position of the target or the source in the frame.\n;;   * :rotate performs of cyclic permutation of frames in a tier, owned by the peer sending the event. The frame\n;;     identified by the :frame entry is moved to position defined by the :position entry. If the cycle is trivial (A -> A), the\n;;     frame is removed.\n;;   * :remove dissociates a frame from the index. legacy hack, should be removed.\n;; * :change is a map associating ports with values. A port is absolute for the system, inputs and output relative terms for a port (it only make sense from a single peer perspective).\n;;   A port is represented as an ordered pair of two numbers, a frame id\n;;   and the position of this port in the frame. The value is the new state of port. (:assign could be a synonym)\n;; * :freeze is a set of ports. Each port present in this set must be considered terminated (i.e. its state won't ever\n;;   change again).\n;; A frame id is negative if the frame is owned by the peer sending the event, positive if the frame is owned by the\n;; peer receiving the event, zero is the root frame.\n\n\n(defn fail [x] (throw x))\n\n(def failure (some-fn #(when (instance? Failure %) %)))\n\n(def pending (Failure. (Pending.)))\n\n(defn error [^String msg] ; Could be ex-info (ExceptionInfo inherits Error or js/Error)\n  (#?(:clj Error. :cljs js/Error.) msg))\n\n(defn pst [e]\n  #?(:clj (.printStackTrace ^Throwable e)\n     :cljs (js/console.error e)))\n\n(defn select-debug-info [debug-info]\n  (merge (select-keys debug-info [::ir/op]) (data/select-ns :hyperfiddle.electric.debug debug-info)))\n\n(defn check-failure [debug-info <x]\n  (m/latest (fn [x]\n              (if (instance? Failure x)\n                (dbg/error (select-debug-info debug-info) x)\n                x)) <x))\n\n(defn latest-apply [debug-info & args]\n  (apply m/latest\n    (fn [f & args]\n      (if-let [err (apply failure f args)]\n        (dbg/error (assoc (select-debug-info debug-info) ::dbg/args args) err)\n        (try (apply f args)\n             (catch #?(:clj Throwable :cljs :default) e\n               (dbg/error (assoc (select-debug-info debug-info) ::dbg/args args) (Failure. e))))))\n    args))\n\n(def latest-first\n  (partial m/latest\n    (fn [x y] (if (instance? Failure y) y x))))\n\n(defn pure [x] (m/cp x))\n\n(def empty-event\n  {:acks 0\n   :tree []\n   :change {}\n   :freeze #{}})\n\n(deftype It [state cancel transfer]\n  IFn\n  (#?(:clj invoke :cljs -invoke) [_]\n    (cancel state))\n  IDeref\n  (#?(:clj deref :cljs -deref) [_]\n    (transfer state)))\n\n(def lift-cancelled\n  (partial comp\n    (fn [it]\n      (reify\n        IFn\n        (#?(:clj invoke :cljs -invoke) [_] (it))\n        IDeref\n        (#?(:clj deref :cljs -deref) [_]\n          (try @it (catch Cancelled e (Failure. e))))))))\n\n(defn signal [<x]\n  (m/signal! (lift-cancelled <x)))\n\n(def this (l/local))\n\n(def context-slot-root            (int 0))   ;; Immutable. The root frame.\n(def context-slot-local-id        (int 1))   ;; The next local id (auto incremented).\n(def context-slot-remote-id       (int 2))   ;; The next remote id (auto decremented).\n(def context-slot-pending-rpos    (int 3))   ;; The reading position in the pending circular buffer.\n(def context-slot-pending-wpos    (int 4))   ;; The writing position in the pending circular buffer.\n(def context-slot-pending-buffer  (int 5))   ;; The pending circular buffer of outputs changed for each message sent.\n(def context-slot-frame-store     (int 6))   ;; A transient map associating frame ids to frame objects.\n(def context-slot-event           (int 7))   ;; The next event to transfer.\n(def context-slot-check           (int 8))   ;; The set of inputs that must be checked on next event transfer.\n(def context-slot-notifier        (int 9))   ;; The notifier callback\n(def context-slot-terminator      (int 10))  ;; The terminator callback\n(def context-slot-incoming        (int 11))  ;; The incoming callback\n(def context-slots                (int 12))\n\n(def tier-slot-parent   (int 0))    ;; Immutable. The parent frame.\n(def tier-slot-position (int 1))    ;; Immutable. The static position of the tier in the parent frame.\n(def tier-slot-buffer   (int 2))    ;; Buffer of array list of child frames.\n(def tier-slot-size     (int 3))    ;; Size of array list of child frames.\n(def tier-slot-foreigns (int 4))    ;; Foreign flow map\n(def tier-slot-hooks    (int 5))    ;; Hooks\n(def tier-slot-vars     (int 6))    ;; A snapshot of the dynamic environment.\n(def tier-slot-remote   (int 7))    ;; If local, the slot of the remote part.\n(def tier-slots         (int 8))\n\n(def frame-slot-context   (int 0))  ;; Immutable. The global context.\n(def frame-slot-parent    (int 1))  ;; Immutable. The parent tier, nil iff root frame.\n(def frame-slot-id        (int 2))  ;; Immutable. Zero if root frame, a strictly positive number if the frame was created by a variable, a strictly negative number if the frame was created by a source.\n(def frame-slot-position  (int 3))  ;; The index of the frame among its siblings.\n(def frame-slot-foreign   (int 4))  ;; Immutable\n(def frame-slot-static    (int 5))  ;; Immutable\n(def frame-slot-dynamic   (int 6))  ;; Immutable\n(def frame-slot-variables (int 7))  ;; Immutable\n(def frame-slot-sources   (int 8))  ;; Immutable\n(def frame-slot-targets   (int 9))  ;; Immutable\n(def frame-slot-inputs    (int 10)) ;; Immutable\n(def frame-slot-tiers     (int 11)) ;; Immutable\n(def frame-slot-constants (int 12)) ;; Immutable\n(def frame-slots          (int 13))\n\n(def input-slot-frame      (int 0))                         ;; parent frame\n(def input-slot-notifier   (int 1))                         ;; consumer notifier\n(def input-slot-terminator (int 2))                         ;; consumer terminator\n(def input-slot-current    (int 3))                         ;; current state\n(def input-slot-dirty      (int 4))                         ;; head of linked list of dirty outputs\n(def input-slot-check      (int 5))                         ;; next item in linked list of check inputs\n(def input-slot-pending    (int 6))                         ;; number of outputs waiting for ack\n(def input-slot-cancel     (int 7))                         ;; nil when no pending transfer, otherwise cancel status\n(def input-slots           (int 8))\n\n(def output-slot-input    (int 0))                          ;; parent input\n(def output-slot-id       (int 1))                          ;; output id, relative to parent frame\n(def output-slot-iterator (int 2))                          ;; producer iterator\n(def output-slot-current  (int 3))                          ;; current state\n(def output-slot-dirty    (int 4))                          ;; tail of linked list of dirty outputs\n(def output-slot-done     (int 5))                          ;; frozen\n(def output-slot-prev     (int 6))                          ;; previous item in doubly linked list of pending outputs\n(def output-slot-next     (int 7))                          ;; next item in doubly linked list of pending outputs\n(def output-slot-time     (int 8))                          ;; position of the doubly linked list of pending outputs in the circular buffer, nil if not pending\n(def output-slots         (int 9))\n\n(defn aswap\n  ([^objects arr slot f]\n   (aset arr slot (f (aget arr slot))))\n  ([^objects arr slot f a]\n   (aset arr slot (f (aget arr slot) a)))\n  ([^objects arr slot f a b]\n   (aset arr slot (f (aget arr slot) a b)))\n  ([^objects arr slot f a b c]\n   (aset arr slot (f (aget arr slot) a b c)))\n  ([^objects arr slot f a b c & ds]\n   (aset arr slot (apply f (aget arr slot) a b c ds))))\n\n(defn doto-aset [^objects arr k v]\n  (doto arr (aset (int k) v)))\n\n(defn make-context ^objects []\n  (doto (object-array context-slots)\n    (aset context-slot-local-id (identity 0))\n    (aset context-slot-remote-id (identity 0))\n    (aset context-slot-pending-rpos (identity 0))\n    (aset context-slot-pending-wpos (identity 0))\n    (aset context-slot-pending-buffer (object-array 2))\n    (aset context-slot-frame-store (transient {}))))\n\n(defn make-tier [^objects parent position]\n  (aset ^objects (aget parent frame-slot-tiers) (int position)\n    (doto (object-array tier-slots)\n      (aset tier-slot-parent parent)\n      (aset tier-slot-position position)\n      (aset tier-slot-buffer (object-array 8))\n      (aset tier-slot-size (identity (int 0)))\n      (aset tier-slot-foreigns {})\n      (aset tier-slot-hooks {}))))\n\n(defn make-frame [^objects context parent id position\n                  foreign static dynamic variable-count source-count\n                  constant-count target-count output-count input-count\n                  ^objects buffer ^objects vars boot]\n  (let [tier-count (+ variable-count source-count)\n        frame (doto (object-array frame-slots)\n                (aset frame-slot-context context)\n                (aset frame-slot-parent parent)\n                (aset frame-slot-id id)\n                (aset frame-slot-position position)\n                (aset frame-slot-foreign (object-array (count foreign)))\n                (aset frame-slot-static (object-array (count static)))\n                (aset frame-slot-dynamic (object-array (count dynamic)))\n                (aset frame-slot-variables (object-array variable-count))\n                (aset frame-slot-sources (object-array source-count))\n                (aset frame-slot-targets (object-array target-count))\n                (aset frame-slot-inputs (object-array input-count))\n                (aset frame-slot-tiers (object-array tier-count))\n                (aset frame-slot-constants (object-array constant-count)))]\n    (dotimes [i tier-count] (make-tier frame i))\n    (aset buffer (int position) frame)\n    (aswap context context-slot-frame-store assoc! id frame)\n    (let [prevs (reduce-kv\n                  (fn [m v <x]\n                    (let [prev (aget vars (int v))\n                          proc (signal <x)]\n                      (aset ^objects (aget frame frame-slot-foreign) (count m) proc)\n                      (aset vars (int v) proc)\n                      (assoc m v prev)))\n                  {} foreign)]\n      (reduce-kv (fn [^objects arr i <x]\n                   (aset arr (int i) (signal <x)) arr)\n        (aget frame frame-slot-static) static)\n      (reduce-kv (fn [^objects arr i v]\n                   (aset arr (int i) (signal (aget vars (int v)))) arr)\n        (aget frame frame-slot-dynamic) dynamic)\n      (let [result (boot frame vars)]\n        (reduce-kv doto-aset vars prevs)\n        result))))\n\n(defn input-ready [^objects input]\n  (when (nil? (aget input input-slot-cancel))\n    (aset input input-slot-cancel false)\n    ((aget input input-slot-notifier))))\n\n(defn output-dirty [^objects output]\n  (let [^objects input (aget output output-slot-input)\n        ^objects dirty (aget input input-slot-dirty)]\n    (aset output output-slot-dirty dirty)\n    (aset input input-slot-dirty output)\n    (when (nil? dirty)\n      (when (identical? input (aget input input-slot-check))\n        (let [^objects frame (aget input input-slot-frame)\n              ^objects context (aget frame frame-slot-context)\n              ^objects check (aget context context-slot-check)]\n          (aset context context-slot-check input)\n          (aset input input-slot-check check)\n          (when (nil? (aget context context-slot-event))\n            (aset context context-slot-event empty-event)\n            ((aget context context-slot-notifier))))))\n    (input-ready input)))\n\n(defn output-spawn [^objects input ^objects output]\n  (when-not (nil? output)\n    (aset output output-slot-input input)\n    (aset output output-slot-iterator\n      ((aget output output-slot-iterator)\n       (fn [] (output-dirty output))\n       (fn []\n         (aset output output-slot-done true)\n         (output-dirty output)))))\n  input)\n\n(defn make-output [id <x]\n  (let [output (object-array output-slots)]\n    (aset output output-slot-id id)\n    (aset output output-slot-done false)\n    (aset output output-slot-prev output)\n    (aset output output-slot-next output)\n    (aset output output-slot-dirty output)\n    (aset output output-slot-current output)\n    (aset output output-slot-iterator <x)\n    output))\n\n(defn input-cancel [^objects input]\n  (let [c (aget input input-slot-cancel)]\n    (aset input input-slot-cancel true)\n    (when (nil? c) ((aget input input-slot-notifier)))))\n\n(defn input-change [^objects input x]\n  (aset input input-slot-current x)\n  (input-ready input))\n\n(defn input-freeze [^objects input]\n  (aset input input-slot-pending -1)\n  (when (nil? (aget input input-slot-cancel))\n    (aset input input-slot-cancel false)\n    ((aget input input-slot-terminator))))\n\n(defn update-event [^objects context k f & args]\n  (if-some [event (aget context context-slot-event)]\n    (aset context context-slot-event (apply update event k f args))\n    (do (aset context context-slot-event (apply update empty-event k f args))\n        ((aget context context-slot-notifier)))))\n\n(defn input-check [^objects input]\n  (let [^objects frame (aget input input-slot-frame)\n        ^objects context (aget frame frame-slot-context)]\n    (loop []\n      (if-some [^objects output (aget input input-slot-dirty)]\n        (let [path [(- (aget frame frame-slot-id)) (aget output output-slot-id)]]\n          (aset input input-slot-dirty (aget output output-slot-dirty))\n          (aset output output-slot-dirty output)\n          (if (aget output output-slot-done)\n            (update-event context :freeze conj path)\n            (let [x @(aget output output-slot-iterator)]\n              (when-not (= (aget output output-slot-current) (aset output output-slot-current x))\n                (let [^objects buffer (aget context context-slot-pending-buffer)\n                      wpos (aget context context-slot-pending-wpos)]\n                  (if-some [t (aget output output-slot-time)]\n                    (let [^objects p (aget output output-slot-prev)\n                          ^objects n (aget output output-slot-next)]\n                      (aset buffer t\n                        (when-not (identical? p output)\n                          (aset p output-slot-next n)\n                          (aset n output-slot-prev p))))\n                    (aswap input input-slot-pending inc))\n                  (aset output output-slot-time wpos)\n                  (if-some [^objects p (aget buffer wpos)]\n                    (let [^objects n (aget p output-slot-next)]\n                      (aset p output-slot-next output)\n                      (aset n output-slot-prev output)\n                      (aset output output-slot-prev p)\n                      (aset output output-slot-next n))\n                    (do (aset buffer wpos output)\n                        (aset output output-slot-prev output)\n                        (aset output output-slot-next output)))\n                  (update-event context :change assoc path x)))))\n          (recur))))))\n\n(defn input-transfer [^objects input]\n  (input-check input)\n  (if (aget input input-slot-cancel)\n    (do ((aget input input-slot-terminator))\n        (throw (Cancelled.)))\n    (case (aget input input-slot-pending)\n      -1 (do ((aget input input-slot-terminator))\n             (aget input input-slot-current))\n      0 (do (aset input input-slot-cancel nil)\n            (aget input input-slot-current))\n      (do (aset input input-slot-cancel nil)\n          pending))))\n\n(defn make-input [^objects frame deps]\n  (let [input (object-array input-slots)]\n    (aset input input-slot-frame frame)\n    (aset input input-slot-pending 0)\n    (aset input input-slot-current pending)\n    (aset input input-slot-cancel false)\n    (aset input input-slot-check input)\n    (reduce output-spawn input deps)))\n\n(defn input-spawn [^objects frame slot deps]\n  (m/signal!                                                ;; inputs are cancelled when reactor is cancelled\n    (fn [n t]\n      (let [input (make-input frame deps)]\n        (aset input input-slot-notifier n)\n        (aset input input-slot-terminator t)\n        (aset ^objects (aget frame frame-slot-inputs) (int slot) input)\n        (n) (->It input input-cancel input-transfer)))))\n\n(defn check-unbound-var [debug-info <x]\n  (m/latest (fn [x]\n              (if (= ::unbound x)\n                (Failure. (error (str \"Unbound var `\" (::dbg/name debug-info) \"`\")))\n                x)) <x))\n\n(defn static [^objects frame slot]\n  (aget ^objects (aget frame frame-slot-static) (int slot)))\n\n(defn dynamic [^objects frame slot debug-info]\n  (check-unbound-var debug-info (aget ^objects (aget frame frame-slot-dynamic) (int slot))))\n\n(defn tree\n  \"A snapshot of the tree below given frame, as nested vectors. Frame vectors start with their id.\"\n  [^objects f]\n  (let [^objects tiers (aget f frame-slot-tiers)]\n    (loop [v []\n           i (int 0)]\n      (if (== i (alength tiers))\n        {:id (aget f frame-slot-id)\n         :inputs (alength ^objects (aget f frame-slot-inputs))\n         :targets (alength ^objects (aget f frame-slot-targets))\n         :sources (alength ^objects (aget f frame-slot-sources))\n         :tiers v}\n        (recur\n          (conj v\n            (let [^objects tier (aget tiers i)\n                  ^objects buf (aget tier tier-slot-buffer)]\n              (loop [v []\n                     i (int 0)]\n                (if (== i (aget tier tier-slot-size))\n                  v (recur (conj v (tree (aget buf i)))\n                      (inc i))))))\n          (inc i))))))\n\n(defn find-scope [f]\n  (loop [f f\n         s #{}]\n    (if-some [^objects tier (aget ^objects f frame-slot-parent)]\n      (recur (aget tier tier-slot-parent)\n        (into s (keys (aget tier tier-slot-hooks)))) s)))\n\n(declare tier-walk-frames)\n(defn frame-walk-tiers [^objects frame step k cb start]\n  (let [^objects tiers (aget frame frame-slot-tiers)\n        size (alength tiers)\n        back (bit-shift-right (- 1 step) 1)\n        back-inc-size (* back (inc size))\n        stop (- size back-inc-size)]\n    (loop [i (if (nil? start) (dec back-inc-size) start)]\n      (let [i (+ i step)]\n        (when-not (== i stop)\n          (if-some [x (let [^objects tier (aget tiers i)]\n                        (if-some [v (get (aget tier tier-slot-hooks) k)]\n                          (cb v) (tier-walk-frames tier step k cb nil)))]\n            x (recur i)))))))\n\n(defn tier-walk-frames [^objects tier step k cb start]\n  (let [^objects buf (aget tier tier-slot-buffer)\n        size (aget tier tier-slot-size)\n        back (bit-shift-right (- 1 step) 1)\n        back-inc-size (* back (inc size))\n        stop (- size back-inc-size)]\n    (loop [i (if (nil? start) (dec back-inc-size) start)]\n      (let [i (+ i step)]\n        (when-not (== i stop)\n          (if-some [x (frame-walk-tiers (aget buf i) step k cb nil)]\n            x (recur i)))))))\n\n(defn notify-rotate [f k]\n  (let [anchor (loop [^objects f f]\n                 (let [tier ^objects (aget f frame-slot-parent)]\n                   (when-not (contains? (aget tier tier-slot-hooks) k)\n                     (if-some [a (tier-walk-frames tier 1 k identity\n                                   (aget f frame-slot-position))]\n                       a (recur (aget tier tier-slot-parent))))))]\n    (frame-walk-tiers f 1 k (fn [target] (k target anchor)) nil) f))\n\n(defn array-call [^objects arr]\n  (dotimes [i (alength arr)]\n    ((aget arr i))))\n\n(defn frame-dispose [^objects f]\n  (aset f frame-slot-position nil)\n  (array-call (aget f frame-slot-static))\n  (array-call (aget f frame-slot-dynamic))\n  (array-call (aget f frame-slot-foreign))\n  (array-call (aget f frame-slot-variables))\n  (array-call (aget f frame-slot-constants)))\n\n(defn frame-rotate [^objects f to]\n  (let [from (aget f frame-slot-position)\n        step (compare to from)\n        ^objects tier (aget f frame-slot-parent)\n        ^objects buf (aget tier tier-slot-buffer)]\n    (if (== to from)\n      (let [size (dec (aget tier tier-slot-size))]\n        (loop [i to]\n          (when-not (== i size)\n            (let [j (inc i)\n                  y (aget buf (int j))]\n              (aset ^objects y frame-slot-position i)\n              (aset buf (int i) y)\n              (recur j))))\n        (aset tier tier-slot-size size)\n        (aset buf (int size) nil)\n        (frame-dispose f))\n      (do (loop [i from]\n            (let [j (+ i step)\n                  ^objects y (aget buf (int j))]\n              (aset y frame-slot-position i)\n              (aset buf (int i) y)\n              (when-not (== to j) (recur j))))\n          (aset f frame-slot-position to)\n          (aset buf (int to) f)\n          (reduce notify-rotate f\n            (find-scope f))))))\n\n(defn move\n  \"Move a frame. If origin position is equal to target position, frame is removed. Will search and call `hook`.\"\n  ([^objects tier from to]\n   (let [f (aget ^objects (aget tier tier-slot-buffer) (int from))]\n     (update-event (aget f frame-slot-context) :tree conj\n       {:op       :rotate\n        :frame    (- (aget f frame-slot-id))\n        :position to})\n     (frame-rotate f to))))\n\n(defn frame-cancel [^objects f]\n  (when-some [pos (aget f frame-slot-position)]\n    (update-event (aget f frame-slot-context) :tree conj\n      {:op       :rotate\n       :frame    (- (aget f frame-slot-id))\n       :position pos})\n    (frame-rotate f pos)))\n\n(defn acopy [src src-off dest dest-off size]\n  #?(:clj (System/arraycopy src src-off dest dest-off size))\n  #?(:cljs (dotimes [i size] (aset dest (+ dest-off i) (aget src (+ src-off i)))))\n  dest)\n\n(defn constructor [static dynamic variable-count source-count constant-count target-count output-count input-count boot]\n  (fn [^objects tier id]\n    (let [^objects par (aget tier tier-slot-parent)\n          ^objects buf (aget tier tier-slot-buffer)\n          pos (aget tier tier-slot-size)\n          cap (alength buf)\n          buf (if (< pos cap)\n                buf (aset tier tier-slot-buffer\n                      (acopy buf 0 (object-array (bit-shift-left cap 1)) 0 cap)))]\n      (aset tier tier-slot-size (inc pos))\n      (make-frame (aget par frame-slot-context)\n        tier id pos (aget tier tier-slot-foreigns) static dynamic\n        variable-count source-count constant-count target-count output-count input-count\n        buf (aget tier tier-slot-vars) boot))))\n\n(deftype FrameIterator [f it]\n  IFn\n  (#?(:clj invoke :cljs -invoke) [_] (frame-cancel f))\n  IDeref\n  (#?(:clj deref :cljs -deref) [_] @it))\n\n;; Takes an instruction identifying a target and a frame-constructor.\n;; Return a flow instantiating the frame.\n(defn constant [^objects frame slot ctor]\n  (let [^objects consts (aget frame frame-slot-constants)\n        ^objects context (aget frame frame-slot-context)]\n    (aset consts slot\n      (signal\n        (m/watch\n          (atom\n            (fn [n t]\n              (if-some [^objects tier (l/get-local this)]\n                (let [parent (aget tier tier-slot-parent)\n                      id (aswap context context-slot-local-id inc)]\n                  (update-event context :tree conj\n                    {:op     :create\n                     :target [(- (aget frame frame-slot-id)) slot]\n                     :source [(- (aget parent frame-slot-id)) (aget tier tier-slot-remote)]})\n                  (let [<x (ctor tier id)\n                        ^objects f (get (aget context context-slot-frame-store) id)]\n                    (->FrameIterator f\n                      (<x n #(do (frame-cancel f)\n                                 (update-event context :tree conj {:op :remove :frame (- id)})\n                                 (aswap context context-slot-frame-store dissoc!\n                                   (aget f frame-slot-id)) (t))))))\n                (failer/run (error \"Unable to build frame - not an object.\") n t)))))))))\n\n(defn inject [v]\n  (fn [<x <y]\n    (fn [n t]\n      ;; TODO make result depend on <y to catch failures, in case binding is ignored\n      (if-some [^objects tier (l/get-local this)]\n        (let [foreigns (aget tier tier-slot-foreigns)]\n          (aset tier tier-slot-foreigns (assoc foreigns v <y))\n          (try (<x n t) (finally (aset tier tier-slot-foreigns foreigns))))\n        (failer/run (error \"Unable to inject - not an object.\") n t)))))\n\n(defn bind [f & args]\n  (fn [n t]\n    (if-some [tier (l/get-local this)]\n      (try ((apply f tier args) n t) ; hook tier and pass to userland !\n           (catch #?(:clj Throwable :cljs :default) e\n             (failer/run e n t)))\n      (failer/run (error \"Unable to bind - not an object.\") n t))))\n\n(defn with [tier <x]\n  (fn [n t]\n    (let [prev (l/get-local this)]\n      (l/set-local this tier)\n      (try (<x n t) (finally (l/set-local this prev))))))\n\n(defn clause\n  ([f] (fn [e] (f (pure e))))\n  ([f c] (fn [e] (when (instance? c (dbg/unwrap e)) (f (pure e))))))\n\n(defn recover [tier catch <x]\n  (yield (fn [x]\n           (when (instance? Failure x)\n             (when-some [<c (catch (.-error ^Failure x))]\n               (with tier <c)))) <x))\n\n(defn variable [^objects frame ^objects vars position slot <<x]\n  (let [^objects tier (aget ^objects (aget frame frame-slot-tiers) (int position))]\n    (aset tier tier-slot-remote slot)\n    (aset tier tier-slot-vars (aclone vars))\n    (aset ^objects (aget frame frame-slot-variables) (int slot)\n      (m/signal!\n        (m/cp (try (let [<x (m/?< <<x)]\n                     (if (failure <x)\n                       <x (m/?< (with tier <x))))\n                   (catch #?(:clj Throwable :cljs :default) e\n                     (Failure. e))))))))\n\n(defn source [^objects frame ^objects vars position slot]\n  (aset ^objects (aget frame frame-slot-sources) (int slot)\n    (doto ^objects (aget ^objects (aget frame frame-slot-tiers) (int position))\n      (aset tier-slot-vars (aclone vars)))) nil)\n\n(defn target [^objects frame slot ctor]\n  (aset ^objects (aget frame frame-slot-targets) (int slot) ctor) nil)\n\n(defn hook [k v <x]\n  (assert (some? v) \"hook value must be non-nil.\")\n  (fn [n t]\n    (if-some [tier (l/get-local this)]\n      (do\n        (loop [^objects tier tier]\n          (let [^objects f (aget tier tier-slot-parent)]\n            (if-some [a (frame-walk-tiers f 1 k identity (aget tier tier-slot-position))]\n              (k v a)\n              (when-some [^objects tier (aget f frame-slot-parent)]\n                (if-some [a (tier-walk-frames tier 1 k identity (aget f frame-slot-position))]\n                  (k v a)\n                  (if (contains? (aget tier tier-slot-hooks) k)\n                    (k v nil) (recur tier)))))))\n        (aswap tier tier-slot-hooks assoc k v)\n        (<x n #(do (aswap tier tier-slot-hooks dissoc k)\n                   (k v) (t))))\n      (failer/run (error \"Unable to hook - not an object.\") n t))))\n\n(def unbound (pure ::unbound))\n\n(defn subject-at [^objects arr slot]\n  (fn [!] (aset arr slot !) #(aset arr slot nil)))\n\n(defn context-ack [^objects context]\n  (let [rpos (aget context context-slot-pending-rpos)\n        ^objects buffer (aget context context-slot-pending-buffer)\n        ^objects output (aget buffer rpos)]\n    (when (= rpos (aget context context-slot-pending-wpos))\n      (throw (error \"Unexpected ack.\")))\n    (aset context context-slot-pending-rpos\n      (bit-and (unchecked-inc rpos)\n        (unchecked-dec (alength buffer))))\n    (aset buffer rpos nil)\n    (loop [output output]\n      (when-not (nil? output)\n        (aset (aget output output-slot-prev) output-slot-next nil)\n        (aset output output-slot-prev nil)\n        (aset output output-slot-time nil)\n        (let [^objects input (aget output output-slot-input)]\n          (when (zero? (aswap input input-slot-pending dec))\n            (input-ready input)))\n        (recur (aget output output-slot-next))))))\n\n(defn context-cancel [^objects context]\n  (update-event context :cancel identity))\n\n(defn context-transfer [^objects context]\n  (loop []\n    (if-some [^objects input (aget context context-slot-check)]\n      (do (aset context context-slot-check (aget input input-slot-check))\n          (aset input input-slot-check input)\n          (input-check input)\n          (recur))\n      (let [event (aget context context-slot-event)]\n        (when (contains? event :cancel)\n          ((aget context context-slot-terminator))\n          (throw (Cancelled.)))\n        (when-not (= {} (:change event))\n          (let [^objects buffer (aget context context-slot-pending-buffer)\n                size (alength buffer)\n                rpos (aget context context-slot-pending-rpos)\n                wpos (aget context context-slot-pending-wpos)]\n            (when (= rpos (aset context context-slot-pending-wpos\n                            (bit-and (unchecked-inc wpos)\n                              (unchecked-dec size))))\n              (let [larger (object-array (bit-shift-left size 1))\n                    split (- size rpos)]\n                (acopy buffer rpos larger 0 split)\n                (acopy buffer 0 larger split rpos)\n                (dotimes [t size]\n                  (when-some [output (aget larger t)]\n                    (loop [^objects o output]\n                      (aset o output-slot-time t)\n                      (let [n (aget o output-slot-next)]\n                        (when-not (identical? n output)\n                          (recur n))))))\n                (aset context context-slot-pending-buffer larger)\n                (aset context context-slot-pending-wpos size)\n                (aset context context-slot-pending-rpos 0)))))\n        (aset context context-slot-event nil) event))))\n\n(defn eval-tree-inst [^objects context inst]\n  (case (:op inst)\n    :create (let [{[target-frame target-slot] :target\n                   [source-frame source-slot] :source} inst]\n              ((-> context\n                 (aget context-slot-frame-store)\n                 ^objects (get target-frame)\n                 ^objects (aget frame-slot-targets)\n                 (aget target-slot))\n               (-> context\n                 (aget context-slot-frame-store)\n                 ^objects (get source-frame)\n                 ^objects (aget frame-slot-sources)\n                 (aget source-slot))\n               (aswap context context-slot-remote-id dec)))\n    :rotate (-> context\n              (aget context-slot-frame-store)\n              (get (:frame inst))\n              (frame-rotate (:position inst)))\n    :remove (aswap context context-slot-frame-store dissoc! (:frame inst)))\n  context)\n\n(defn eval-change-inst [^objects context [id slot] value]\n  (-> context\n    (aget context-slot-frame-store)\n    ^objects (get id)\n    ^objects (aget frame-slot-inputs)\n    ^objects (aget slot)\n    (input-change value))\n  context)\n\n(defn eval-freeze-inst [^objects context [id slot]]\n  (-> context\n    (aget context-slot-frame-store)\n    ^objects (get id)\n    ^objects (aget frame-slot-inputs)\n    ^objects (aget slot)\n    (input-freeze))\n  context)\n\n(defn parse-event [^objects context {:keys [acks tree change freeze]}]\n  (dotimes [_ acks] (context-ack context))\n  (reduce eval-tree-inst context tree)\n  (when-not (= {} change)\n    (update-event context :acks inc)\n    (reduce-kv eval-change-inst context change))\n  (reduce eval-freeze-inst context freeze))\n\n(defn process-incoming-events [^objects context >incoming]\n  (m/sample (partial reduce parse-event context) >incoming))\n\n(defn write-outgoing-events [write >events]\n  (m/ap (let [e (m/?> >events)]\n          (when-not (= e empty-event)\n            (m/? (write e))))))\n\n(defn peer [var-count dynamic variable-count source-count constant-count target-count output-count input-count ctor]\n  (fn rec\n    ([write ?read] (rec write ?read pst))\n    ([write ?read on-error]\n     (m/reactor\n       (let [^objects context (make-context)]\n         (m/stream!\n           (write-outgoing-events write\n             (m/stream!\n               (fn [n t]\n                 (aset context context-slot-notifier n)\n                 (aset context context-slot-terminator t)\n                 (when-some [<main (make-frame context nil 0 0 {} [] dynamic\n                                     variable-count source-count constant-count target-count output-count input-count\n                                     context (object-array (repeat var-count unbound)) ctor)]\n                   (m/stream! (m/latest (fn [x] (when (instance? Failure x) (on-error (.-error x)))) <main)))\n                 (->It context context-cancel context-transfer)))))\n         (m/stream! (process-incoming-events context (m/stream! (m/relieve into (m/sample vector (m/observe ?read)))))))))))\n\n(defn collapse [s n f & args]\n  (->> (iterate pop s)\n    (transduce (comp (map peek) (take n)) conj args)\n    (apply f)\n    (conj (nth (iterate pop s) n))))\n\n(defn snapshot [env f & args]\n  (update env :stack conj (apply f env args)))\n\n(defn reverse-index [m]\n  (reduce-kv (fn [v x i] (assoc v i x))\n    (vec (repeat (count m) nil)) m))\n\n(def empty-frame\n  {:variable 0\n   :source   0\n   :constant 0\n   :target   0\n   :output   0\n   :input    0\n   :static   {}\n   :dynamic  {}})\n\n;; TODO move me\n;; `new` creates a local variable and a remote source\n;; `p/fn` creates a local constant and a remote target\n;; Same duality with input and output, if there is 3 inputs locally, there is 3 outputs remotely.\n;; There is no instruction to create inputs and outputs, they are infered from unquote-splicing.\n\n(defn compile [inst {:keys [nop sub pub inject lift vget bind invoke input do output static dynamic\n                            global literal variable source constant target main] :as fns}]\n  (-> ((fn walk [env off idx dyn inst]\n         (case (::ir/op inst)\n           ::ir/nop (update env :stack conj nop)\n           ::ir/sub (let [p (- idx (::ir/index inst))]\n                      (if (< p off)\n                        (let [f (:static env)\n                              i (f p (count f))]\n                          (-> env\n                            (assoc :static (assoc f p i))\n                            (update :stack conj (static i))))\n                        (update env :stack conj (sub p))))\n           ::ir/pub (-> env\n                      (walk off idx dyn (::ir/init inst))\n                      (walk off (inc idx) dyn (::ir/inst inst))\n                      (update :stack collapse 2 pub idx))\n           ::ir/do  (let [deps (::ir/deps inst)]\n                      (-> (reduce (fn [env arg] (walk env off idx dyn arg)) env deps)\n                        (update :stack collapse (count deps) vector)\n                        (walk off idx dyn (::ir/inst inst))\n                        (update :stack collapse 2 do)))\n           ::ir/def (let [v (::ir/slot inst)]\n                      (-> env\n                        (update :vars max v)\n                        (update :stack conj (inject v))))\n           ::ir/lift (-> env\n                       (walk off idx dyn (::ir/init inst))\n                       (update :stack collapse 1 lift))\n           ::ir/eval (update env :stack conj ((:eval fns) (::ir/form inst) (::ir/ns inst))) ; can't shadow eval in advanced CLJS compilation\n           ::ir/node (let [v (::ir/slot inst)\n                           env (update env :vars max v)]\n                       (if (dyn v)\n                         (update env :stack conj (vget v))\n                         (let [d (:dynamic env)\n                               i (d v (count d))]\n                           (-> env\n                             (assoc :dynamic (assoc d v i))\n                             (update :stack conj (dynamic i inst))))))\n           ::ir/bind (let [v (::ir/slot inst)]\n                       (-> env\n                         (update :vars max v)\n                         (walk off idx (conj dyn v) (::ir/inst inst))\n                         (update :stack collapse 1 bind v (- idx (::ir/index inst)))))\n           ::ir/apply (let [f (::ir/fn inst)\n                            args (::ir/args inst)]\n                        (-> (reduce (fn [env inst] (walk env off idx dyn inst)) env (cons f args))\n                          (update :stack collapse (inc (count args))\n                            (partial invoke\n                              (loop [f f]\n                                (case (::ir/op f)\n                                  ::ir/global (assoc f ::dbg/type :apply, ::dbg/name (symbol (::ir/name f)))\n                                  ::ir/node (assoc f ::dbg/type :apply)\n                                  ::ir/literal {::dbg/type :apply ::dbg/name (::ir/value f)}\n                                  ::ir/eval (assoc f ::dbg/type :eval)\n                                  ::ir/sub (assoc f ::dbg/type :apply)\n                                  ::ir/input (assoc f ::dbg/type :apply)\n                                  ::ir/apply (recur (::ir/fn f))\n                                  {::dbg/type :unknown-apply, :op f}))))))\n           ::ir/input (let [deps (::ir/deps inst)]\n                        (-> (reduce (fn [env arg] (walk env off idx dyn arg)) env deps)\n                          (update :stack collapse (count deps) vector)\n                          (snapshot :input)\n                          (update :input inc)\n                          (update :stack collapse 2 input)))\n           ::ir/output (-> env\n                         (walk off idx dyn (::ir/init inst))\n                         (snapshot :output)\n                         (update :output inc)\n                         (update :stack collapse 2 (partial output inst)))\n           ::ir/global (update env :stack conj (global (::ir/name inst)))\n           ::ir/literal (update env :stack conj (literal (::ir/value inst)))\n           ::ir/variable (-> env\n                           (walk off idx dyn (::ir/init inst))\n                           (snapshot :source)\n                           (snapshot :variable)\n                           (update :variable inc)\n                           (update :stack collapse 3 variable))\n           ::ir/source (-> env\n                         (snapshot :variable)\n                         (snapshot :source)\n                         (update :source inc)\n                         (update :stack collapse 2 source))\n           ::ir/constant (-> env\n                           (merge empty-frame)\n                           (walk idx idx #{} (::ir/init inst))\n                           (snapshot (comp reverse-index :static))\n                           (snapshot (comp reverse-index :dynamic))\n                           (snapshot :variable)\n                           (snapshot :source)\n                           (snapshot :constant)\n                           (snapshot :target)\n                           (snapshot :output)\n                           (snapshot :input)\n                           (merge (select-keys env (keys empty-frame)))\n                           (snapshot :constant)\n                           (update :constant inc)\n                           (update :stack collapse 10 (partial constant inst)))\n           ::ir/target (let [deps (::ir/deps inst)]\n                         (-> (reduce (fn [env inst] (walk env idx idx #{} inst))\n                               (merge env empty-frame) deps)\n                           (update :stack collapse (count deps) vector)\n                           (snapshot (comp reverse-index :static))\n                           (snapshot (comp reverse-index :dynamic))\n                           (snapshot :variable)\n                           (snapshot :source)\n                           (snapshot :constant)\n                           (snapshot :target)\n                           (snapshot :output)\n                           (snapshot :input)\n                           (merge (select-keys env (keys empty-frame)))\n                           (snapshot :target)\n                           (update :target inc)\n                           (update :stack collapse 10 target)))))\n       (assoc empty-frame :vars -1) 0 0 #{} inst)\n    (snapshot (comp inc :vars))\n    (snapshot (comp reverse-index :dynamic))\n    (snapshot :variable)\n    (snapshot :source)\n    (snapshot :constant)\n    (snapshot :target)\n    (snapshot :output)\n    (snapshot :input)\n    (:stack)\n    (collapse 9 main)\n    (peek)))\n\n(defn sym [& args]\n  (symbol (str/join \"-\" args)))\n\n(defn emit [prefix inst]\n  (compile inst\n    {:nop      nil\n     :sub      (fn [idx] (sym prefix 'pub idx))\n     :pub      (fn [form cont idx]\n                 `(let [~(sym prefix 'pub idx) (signal ~form)] ~cont))\n     :do       (fn [deps form]\n                 `(do (make-input ~(sym prefix 'frame) ~deps) ~form))\n     :static   (fn [i] `(static ~(sym prefix 'frame) ~i))\n     :dynamic  (fn [i debug-info] `(dynamic ~(sym prefix 'frame) ~i '~(select-debug-info debug-info)))\n     :eval     (fn [form _ns] `(pure ~form))\n     :lift     (fn [f] `(pure ~f))\n     :vget     (fn [v] `(aget ~(sym prefix 'vars) (int ~v)))\n     :bind     (fn [form slot idx]\n                 `(let [~(sym prefix 'prev) (aget ~(sym prefix 'vars) ~slot)]\n                    (aset ~(sym prefix 'vars) (int ~slot) ~(sym prefix 'pub idx))\n                    (let [~(sym prefix 'res) ~form]\n                      (aset ~(sym prefix 'vars) (int ~slot) ~(sym prefix 'prev))\n                      ~(sym prefix 'res))))\n     :invoke   (fn [debug-info & forms] `(latest-apply '~(select-debug-info debug-info) ~@forms))\n     :input    (fn [deps slot] `(input-spawn ~(sym prefix 'frame) ~slot ~deps))\n     :output   (fn [debug-info form slot]\n                 `(make-output ~slot (check-failure '~(select-debug-info debug-info) ~form)))\n     :global   (fn [x] `(pure ~(symbol x)))\n     :literal  (fn [x] `(pure (quote ~x)))\n     :inject   (fn [v] `(pure (inject ~v)))\n     :variable (fn [form remote slot]\n                 `(variable ~(sym prefix 'frame) ~(sym prefix 'vars) ~(+ remote slot) ~slot ~form))\n     :source   (fn [remote slot]\n                 `(source ~(sym prefix 'frame) ~(sym prefix 'vars) ~(+ remote slot) ~slot))\n     :constant (fn [debug-info form static dynamic variable-count source-count constant-count target-count output-count input-count slot]\n                 `(constant ~(sym prefix 'frame) ~slot\n                    (constructor ~(mapv (fn [p] (sym prefix 'pub p)) static) ~dynamic\n                      ~variable-count ~source-count\n                      ~constant-count ~target-count\n                      ~output-count ~input-count\n                      (fn [~(sym prefix 'frame)\n                           ~(sym prefix 'vars)]\n                        (check-failure '~(select-debug-info debug-info) ~form)))))\n     :target   (fn [deps static dynamic variable-count source-count constant-count target-count output-count input-count slot]\n                 `(target ~(sym prefix 'frame) ~slot\n                    (constructor ~(mapv (fn [p] (sym prefix 'pub p)) static) ~dynamic\n                      ~variable-count ~source-count\n                      ~constant-count ~target-count\n                      ~output-count ~input-count\n                      (fn [~(sym prefix 'frame)\n                           ~(sym prefix 'vars)]\n                        (make-input ~(sym prefix 'frame) ~deps)))))\n     :main     (fn [form var-count dynamic variable-count source-count constant-count target-count output-count input-count]\n                 `(peer ~var-count ~dynamic\n                    ~variable-count ~source-count\n                    ~constant-count ~target-count\n                    ~output-count ~input-count\n                    (fn [~(sym prefix 'frame)\n                         ~(sym prefix 'vars)]\n                      ~form)))}))\n\n(tests\n  (emit nil (ir/literal 5)) :=\n  `(peer 0 [] 0 0 0 0 0 0\n     (fn [~'-frame ~'-vars]\n       (pure '5)))\n\n  (emit nil (ir/apply\n              (ir/global :clojure.core/+)\n              (ir/literal 2) (ir/literal 3))) :=\n  `(peer 0 [] 0 0 0 0 0 0\n     (fn [~'-frame ~'-vars]\n       (latest-apply '{::ir/op    ::ir/global\n                       ::dbg/type :apply\n                       ::dbg/name ~'clojure.core/+}\n         (pure ~'clojure.core/+)\n         (pure '2)\n         (pure '3))))\n\n  (emit nil\n    (ir/pub (ir/literal 1)\n      (ir/apply (ir/global :clojure.core/+)\n        (ir/sub 1)\n        (ir/literal 2)))) :=\n  `(peer 0 [] 0 0 0 0 0 0\n     (fn [~'-frame ~'-vars]\n       (let [~'-pub-0 (signal (pure '1))]\n         (latest-apply '{::ir/op    ::ir/global\n                         ::dbg/type :apply\n                         ::dbg/name ~'clojure.core/+}\n           (pure ~'clojure.core/+) ~'-pub-0 (pure '2)))))\n\n  (emit nil\n    (ir/variable\n      (ir/global :missionary.core/none))) :=\n  `(peer 0 [] 1 0 0 0 0 0\n     (fn [~'-frame ~'-vars]\n       (variable ~'-frame ~'-vars 0 0 (pure m/none))))\n\n  (emit nil (ir/input [])) :=\n  `(peer 0 [] 0 0 0 0 0 1\n     (fn [~'-frame ~'-vars]\n       (input-spawn ~'-frame 0 [])))\n\n  (emit nil (ir/constant\n              (ir/literal :foo))) :=\n  `(peer 0 [] 0 0 1 0 0 0\n     (fn [~'-frame ~'-vars]\n       (constant ~'-frame 0\n         (constructor [] [] 0 0 0 0 0 0\n           (fn [~'-frame ~'-vars]\n             (check-failure '{::ir/op ::ir/constant}\n               (pure ':foo)))))))\n\n  (emit nil\n    (ir/variable\n      (ir/pub (ir/constant (ir/literal 3))\n        (ir/pub (ir/constant (ir/input []))\n          (ir/apply\n            (ir/apply (ir/global :clojure.core/hash-map)\n              (ir/literal 2) (ir/sub 2)\n              (ir/literal 4) (ir/sub 1)\n              (ir/literal 5) (ir/sub 1))\n            (ir/literal 1) (ir/constant (ir/literal 7)))))))\n  `(peer 0 [] 1 0 3 0 0 0\n     (fn [~'-frame ~'-vars]\n       (variable ~'-frame ~'-vars 0 0\n         (let [~'-pub-0 (signal\n                          (constant ~'-frame 0\n                            (constructor [] [] 0 0 0 0 0 0\n                              (fn [~'-frame ~'-vars]\n                                (check-failure 'nil (pure '3))))))]\n           (let [~'-pub-1 (signal\n                            (constant ~'-frame 1\n                              (constructor [] [] 0 0 0 0 0 1\n                                (fn [~'-frame ~'-vars]\n                                  (check-failure 'nil (input-spawn ~'-frame 0 []))))))]\n             (latest-apply '{::dbg/type :unknown-apply, ; FIXME remove this debug noise\n                             :op\n                             [:apply\n                              [:global :clojure.core/hash-map nil]\n                              [:literal 2]\n                              [:sub 2]\n                              [:literal 4]\n                              [:sub 1]\n                              [:literal 5]\n                              [:sub 1]]}\n               (latest-apply '{::ir/op ::ir/global\n                               ::dbg/type :apply,\n                               ::dbg/name clojure.core/hash-map}\n                 (pure hash-map)\n                 (pure '2) ~'-pub-0\n                 (pure '4) ~'-pub-1\n                 (pure '5) ~'-pub-1)\n               (pure '1)\n               (constant ~'-frame 2\n                 (constructor [] [] 0 0 0 0 0 0\n                   (fn [~'-frame ~'-vars]\n                     (check-failure 'nil (pure '7)))))))))))\n\n  (emit nil (ir/inject 0)) :=\n  `(peer 1 [] 0 0 0 0 0 0\n     (fn [~'-frame ~'-vars]\n       (pure (inject 0))))\n\n  (emit nil\n    (ir/pub (ir/literal nil)\n      (ir/constant (ir/sub 1)))) :=\n  `(peer 0 [] 0 0 1 0 0 0\n     (fn [~'-frame ~'-vars]\n       (let [~'-pub-0 (signal (pure 'nil))]\n         (constant ~'-frame 0\n           (constructor [~'-pub-0] [] 0 0 0 0 0 0\n             (fn [~'-frame ~'-vars]\n               (check-failure '{::ir/op ::ir/constant}\n                 (static ~'-frame 0)))))))))\n\n(defn juxt-with ;;juxt = juxt-with vector, juxt-with f & gs = apply f (apply juxt gs)\n  ([f]\n   (fn\n     ([] (f))\n     ([a] (f))\n     ([a b] (f))\n     ([a b c] (f))\n     ([a b c & ds] (f))))\n  ([f g]\n   (fn\n     ([] (f (g)))\n     ([a] (f (g a)))\n     ([a b] (f (g a b)))\n     ([a b c] (f (g a b c)))\n     ([a b c & ds] (f (apply g a b c ds)))))\n  ([f g h]\n   (fn\n     ([] (f (g) (h)))\n     ([a] (f (g a) (h a)))\n     ([a b] (f (g a b) (h a b)))\n     ([a b c] (f (g a b c) (h a b c)))\n     ([a b c & ds] (f (apply g a b c ds) (apply h a b c ds)))))\n  ([f g h i]\n   (fn\n     ([] (f (g) (h) (i)))\n     ([a] (f (g a) (h a) (i a)))\n     ([a b] (f (g a b) (h a b) (i a b)))\n     ([a b c] (f (g a b c) (h a b c) (i a b c)))\n     ([a b c & ds] (f (apply g a b c ds) (apply h a b c ds) (apply i a b c ds)))))\n  ([f g h i & js]\n   (fn\n     ([] (apply f (g) (h) (i) (map #(%) js)))\n     ([a] (apply f (g a) (h a) (i a) (map #(% a) js)))\n     ([a b] (apply f (g a b) (h a b) (i a b) (map #(% a b) js)))\n     ([a b c] (apply f (g a b c) (h a b c) (i a b c) (map #(% a b c) js)))\n     ([a b c & ds] (apply f (apply g a b c ds) (apply h a b c ds) (apply i a b c ds) (map #(apply % a b c ds) js))))))\n\n(defn globals [program]\n  (->> (tree-seq coll? seq program)\n       (eduction (comp (filter vector?)\n                       (filter (fn [[a _]] (= :global a)))\n                       (map second)\n                       (distinct)))\n       (sort-by (juxt namespace name))))\n\n(defn missing-exports [resolvef program]\n  (->> (globals program)\n    (eduction (map (juxt (partial resolvef ::not-found) identity))\n      (filter #(= ::not-found (first %)))\n      (map second)\n      (map symbol))))\n\n(defn dynamic-resolve [nf x]\n  ;; For an Electric Clojure program to run, the server program must be loaded.\n  ;; Multiple approaches:\n  ;; - bootstrap server, eagerly loading namespaces on server JVM process start (current choice),\n  ;; - lazy load namespaces on client request (requires CORS rules),\n  ;; - precompile and lazy load server program on client request - server program is uniquely identified.\n  #?(:clj (try (clojure.core/eval (symbol x)) ; find a java class or static field (e.g. PersistentArrayMap/EMPTY)\n               (catch clojure.lang.Compiler$CompilerException _ nf))\n     :cljs nf))\n\n(defn eval\n  ([inst] (eval dynamic-resolve inst))\n  ([resolvef inst]\n   (compile inst\n     {:nop      (constantly nil)\n      ;; FIXME Eval is a security hazard, client should not send any program to\n      ;;       eval on server. Solution is for server to compile and store\n      ;;       programs, client address them by unique name (hash).\n      :eval     (fn [form ns]\n                  (if-some [ns (some-> ns find-ns)]\n                    (constantly (pure (binding [*ns* ns] (clojure.core/eval form))))\n                    (constantly (pure (clojure.core/eval form)))))\n      :do       (fn [deps inst]\n                  (fn [pubs frame vars]\n                    (do (make-input frame (mapv (fn [inst] (inst pubs frame vars)) deps))\n                        (inst pubs frame vars))))\n      :sub      (fn [idx]\n                  (fn [pubs frame vars]\n                    (nth pubs idx)))\n      :pub      (fn [form cont _]\n                  (fn [pubs frame vars]\n                    (cont (conj pubs (signal (form pubs frame vars))) frame vars)))\n      :lift     (fn [form]\n                  (fn [pubs frame vars]\n                    (pure (form pubs frame vars))))\n      :vget     (fn [slot]\n                  (fn [pubs frame ^objects vars]\n                    (aget vars (int slot))))\n      :static   (fn [slot]\n                  (fn [pubs frame vars]\n                    (static frame slot)))\n      :dynamic  (fn [slot debug-info]\n                  (fn [pubs frame vars]\n                    (dynamic frame slot debug-info)))\n      :bind     (fn [form slot s]\n                  (fn [pubs frame ^objects vars]\n                    (let [prev (aget vars (int slot))]\n                      (aset vars (int slot) (nth pubs s))\n                      (let [res (form pubs frame vars)]\n                        (aset vars (int slot) prev) res))))\n      :invoke   (fn [debug-info & forms] (apply juxt-with (partial latest-apply debug-info) forms))\n      :input    (fn [deps slot]\n                  (fn [pubs frame vars]\n                    (input-spawn frame slot\n                      (mapv (fn [inst] (inst pubs frame vars)) deps))))\n      :output   (fn [debug-info form slot]\n                  (fn [pubs frame vars]\n                    (make-output slot (check-failure debug-info (form pubs frame vars)))))\n      :global   (fn [x]\n                  (let [r (resolvef ::not-found x)]\n                    (case r\n                      ::not-found (throw (ex-info (str \"Unable to resolve symbol: \" (symbol x)) {}))\n                      (constantly (pure r)))))\n      :literal  (fn [x] (constantly (pure x)))\n      :inject   (fn [slot] (constantly (pure (inject slot))))\n      :variable (fn [form remote slot]\n                  (fn [pubs frame vars]\n                    (variable frame vars (+ remote slot) slot\n                      (form pubs frame vars))))\n      :source   (fn [remote slot]\n                  (fn [pubs frame vars]\n                    (source frame vars (+ remote slot) slot)))\n      :constant (fn [debug-info form static dynamic variable-count source-count constant-count target-count output-count input-count slot]\n                  (fn [pubs frame vars]\n                    (constant frame slot\n                      (constructor (mapv pubs static) dynamic variable-count source-count constant-count target-count output-count input-count\n                        (fn [& args]\n                          (check-failure debug-info (apply form pubs args)))))))\n      :target   (fn [deps static dynamic variable-count source-count constant-count target-count output-count input-count slot]\n                  (fn [pubs frame vars]\n                    (target frame slot\n                      (constructor (mapv pubs static) dynamic variable-count source-count constant-count target-count output-count input-count\n                        (fn [frame vars] (make-input frame (mapv (fn [inst] (inst pubs frame vars)) deps)))))))\n      :main     (fn [form var-count dynamic variable-count source-count constant-count target-count output-count input-count]\n                  (peer var-count dynamic\n                    variable-count source-count\n                    constant-count target-count\n                    output-count input-count\n                    (partial form [])))})))\n\n\n\n;; TESTS\n\n(defn queue []\n  #?(:clj  (let [q (java.util.LinkedList.)]\n             (fn\n               ([] (.remove q))\n               ([x] (.add q x) x)))\n     :cljs (let [q (object-array 0)]\n             (fn\n               ([]\n                (when (zero? (alength q))\n                  (throw (js/Error. \"No such element.\")))\n                (.shift q))\n               ([x] (.push q x) x)))))\n\n(tests\n  \"uncaught exception crash\"\n  (let [q (queue)\n        !x (atom true)\n        c (((eval (ir/apply (ir/literal q)\n                    (ir/apply (ir/literal #(when-not % (throw (ex-info \"boom\" {}))))\n                      (ir/variable (ir/literal (m/watch !x))))))\n            (fn [x] (q x) (fn [s _] (q #(s nil)) #()))\n            (fn [!] (q !) #())\n            (fn [e] (throw e)))\n           q q)]\n    (q) := nil\n    (q)\n    (swap! !x not)\n    (ex-message (q)) := \"boom\"))\n\n(tests\n  \"simple input\"\n  (let [q (queue)\n        c (((eval (ir/input []))\n            (fn [x] (q [::write x]) (fn [s _] (q [::backpressure #(s nil)]) #()))\n            (fn [!] (q [::read !]) #()) ; reader subject\n            (fn [e] (q [::error e])))\n           q q)]\n    (q) := [::error (Pending.)] ; input starts Pending (a failure state)\n    (let [[_read !] (q)]        ; on boot, reactor calls the reader subject\n      (! (update empty-event :change assoc [0 0] :a)) ; simulate incomming message: assign value :a to frame 0 (root), port 0 (input)\n      (q) := [::write (update empty-event :acks inc)]   ; reactor acknowledges by sending a message\n      (let [[_backpressure ack] (q)] (ack))             ; manualy simulate backpressure\n      (! (update empty-event :change assoc [0 0] :b)) ; simulate incomming message: assign value :b to frame 0 (root), port 0 (input)\n      (q) := [::write (update empty-event :acks inc)]   ; reactor acknowledges by sending a message\n      (let [[_backpressure ack] (q)] (ack))             ; manualy simulate backpressure\n      (c)                                             ; terminate reactor\n      (type (q)) := Cancelled)))\n\n(tests\n  \"Fast changes to simulate backpressure\"\n  (let [q (queue)\n        c (((eval (ir/input []))\n            (fn [x] (q [::write x]) (fn [s _] (q [::backpressure #(s nil)]) #()))\n            (fn [!] (q [::read !]) #()) ; reader subject\n            (fn [e] (q [::error e])))\n           q q)]\n    (q) := [::error (Pending.)] ; input starts Pending (a failure state)\n    (let [[_read !] (q)]        ; on boot, reactor calls the reader subject\n      (! (update empty-event :change assoc [0 0] :a)) ; simulate 4 incomming messages\n      (! (update empty-event :change assoc [0 0] :b))\n      (! (update empty-event :change assoc [0 0] :c))\n      (! (update empty-event :change assoc [0 0] :d))\n      (q) := [::write (assoc empty-event :acks 1)] ; There is room in the write buffer, reactor acknowledges by sending a message immediatly\n      (let [[_backpressure ack] (q)] (ack))        ; manualy simulate backpressure\n      ;; We expect to see :acks 1, then :acks 3 (total 4). But because of an\n      ;; implementation detail there still room in the buffer. We therefore see\n      ;; another :acks 1.\n      (q) := [::write (assoc empty-event :acks 1)]\n      (let [[_backpressure ack] (q)] (ack))        ; manualy simulate backpressure\n      (q) := [::write (assoc empty-event :acks 2)] ; Acks are accumulated till there is room in the write buffer - total acks count = 4\n      (let [[_backpressure ack] (q)] (ack))        ; manualy simulate backpressure\n      (c)                                        ; terminate reactor\n      (type (q)) := Cancelled)))\n\n(tests\n  '(tap (p/server (new (:hyperfiddle.electric.impl.compiler/closure (p/client 1)))))\n\n  (let [q (queue)\n        c (((eval (ir/apply (ir/literal q)\n                    (ir/input [(ir/target [(ir/output (ir/literal 1))])\n                               ir/source])))\n            (fn write-to-network [x] (q x) (fn [s _] (q #(s nil)) #()))\n            (fn read-subject [!] (q !) #())\n            (fn error-handler [e] (q e)))\n           q q)]\n    (q) := (Pending.)\n    (let [! (q)]\n      \"client recieves event\"\n      (! (assoc empty-event\n           :tree [{:op :create, :target [0 0], :source [0 0]}]\n           :change {[0 0] pending}))\n      (q) := (assoc empty-event\n               :acks 1                ; 1 means whole changeset\n               :change {[1 0] 1}      ; output of `(p/client 1)`, frame 1 slot 0\n               :freeze #{[1 0]}) ; the port won't change anymore, remote can terminate it\n      ((q))                      ; trigger backpressure\n      (! (assoc empty-event\n           :acks 1                      ; remote acknowledged our changeset\n           :change {[0 0] 1}))          ; port 0 of frame 0 = 1\n      (q) := 1\n      (q) := (assoc empty-event :acks 1)\n      ((q))\n      ;; frame -1 -> negative sign means it is server's frame\n      ;; it is moving from position 0 to 0, which is interpreted as remove\n      ;; we're terminating the frame because its port is frozen\n      ;; `:op :remove` is legacy, will be removed in future\n      (! (assoc empty-event :tree [{:op :rotate, :frame -1, :position 0} {:op :remove, :frame -1}]))))\n\n  (let [q (queue)\n        c (((eval (ir/do [(ir/output\n                            (ir/pub (ir/constant (ir/input []))\n                              (ir/apply (ir/literal {})\n                                (ir/sub 1)\n                                (ir/pub (ir/literal 0) ; bind %arity\n                                  (ir/apply (ir/literal {})\n                                    (ir/sub 1)\n                                    (ir/bind 0 1 (ir/variable (ir/sub 2))))))))]\n                         ir/nop))\n            (fn [x] (q x) (fn [s _] (q #(s nil)) #()))\n            (fn [!] (q !) #())\n            (fn [e] (q e)))\n           q q)]\n    \"server sends event, frame got created, output is pending\"\n    (q) := (assoc empty-event\n             :tree [{:op :create, :target [0 0], :source [0 0]}] ; create child frame (root frame, tier 0)\n             :change {[0 0] pending})                            ; root frame input 0 = pending\n    ;; (events\n    ;;   (create-frame :target {:frame 0 :slot 0} :source {:frame 0 :slot 0})\n    ;;   (set-input :frame 0 :slot 0 :value pending))\n\n    ((q))\n    (let [! (q)]\n      (! (assoc empty-event\n           :acks 1\n           :change {[1 0] 1}\n           :freeze #{[1 0]}))\n      (q) := (assoc empty-event\n               :acks 1\n               :change {[0 0] 1})\n      ((q))\n      (! (assoc empty-event :acks 1))\n      (q) := (assoc empty-event :tree [{:op :rotate, :frame -1, :position 0} {:op :remove, :frame -1}])\n      ((q)))))\n\n(tests\n  \"d-glitch\"\n  (let [q (queue)\n        !x (atom 1)\n        c (((eval (ir/apply (ir/literal q) (ir/input [(ir/output (ir/variable (ir/literal (m/watch !x))))])))\n            (fn [x] (q x) (fn [s _] (q #(s nil)) #()))\n            (fn [!] (q !) #())\n            (fn [e] (q e)))\n           q q)]\n    (q) := (Pending.)                                       ;; input is initially pending\n    (q) := (assoc empty-event :change {[0 0] 1})            ;; output state 1 is published\n    ((q))                                                   ;; backpressure\n    (let [! (q)]                                            ;; get callback\n      (! (assoc empty-event :acks 1))                       ;; ack previous changeset\n      (! (assoc empty-event :change {[0 0] :a}))            ;; input state changes to :a\n      (q) := :a                                             ;; main result is sampled\n      (q) := (assoc empty-event :acks 1)                    ;; changeset is acked\n      ((q))                                                 ;; backpressure\n      (swap! !x inc)                                        ;; input is invalidated due to its dep on output (d-glitch)\n      (q) := (Pending.)                                     ;; main result is sampled\n      (q) := (assoc empty-event :change {[0 0] 2})          ;; output state 2 is published\n      ((q))                                                 ;; backpressure\n      (! (assoc empty-event :acks 1))                       ;; ack previous changeset, previous input state is restored\n      (q) := :a                                             ;; main result is sampled\n      )))\n\n;; Leo: write a test for the infinite loop bug https://github.com/hyperfiddle/electric/commit/2894b3e23e4406c0d9fed4944b2cb553ad28804a\n;; (p/client (let [x (p/watch !x)] (p/server x x) (reset! !x nil))) ; two xs\n(tests \"infinite loop bug\"\n  (let [q (queue)\n        !x (atom 1)\n        c (((eval (ir/apply (ir/literal q)\n                    (ir/pub (ir/variable (ir/literal (m/watch !x)))\n                      (ir/input [(ir/output (ir/sub 1)) (ir/output (ir/sub 1))]))))\n            (fn [x] (q x) (fn [s _] (q #(s nil)) #()))\n            (fn [!] (q !) #())\n            (fn [e] (q e)))\n           q q)]\n    (q) := (Pending.)                            ; input is initially pending\n    (q) := (assoc empty-event\n             :change {[0 0] 1, [0 1] 1})         ; this is sent for `(p/server x x)`\n    ((q))                                        ; backpressure\n    (let [! (q)]                                 ; get callback\n      (swap! !x inc)\n      ;; this caused an infinite loop before fixing the bug in algo\n      (q) := (assoc empty-event\n               :change {[0 0] 2, [0 1] 2}) ; new value for the ports, but the previous wasn't ackd yet\n      ((q))\n      (! (assoc empty-event\n           :acks 1\n           :change {[0 0] :foo}))        ; still pending, the 2s are not acked yet\n      (q) := (assoc empty-event :acks 1) ; send ack to server for the :foo\n      ((q))\n      (! (assoc empty-event :acks 1))   ; now the client\n      (q) := :foo\n      )))\n\n(tests \"FailureInfo equality\"\n  (let [q (queue)\n        c (((eval (ir/do [(ir/output (ir/input [ir/source]))] ir/nop))\n            (fn [x] (q x) (fn [s _] (q #(s nil)) #()))\n            (fn [!] (q !) #())\n            (fn [e] (q e)))\n           q q)]\n    (q) := (assoc empty-event :change {[0 0] (Failure. (Pending.))})\n    ((q))\n    (let [! (q)]\n      (! (assoc empty-event\n           :change {[0 0] (Failure. (dbg/ex-info* \"0\" {} \"f0f38709-0191-45b7-85e9-1266abb467df\" nil))}))\n      (q) := {:acks 1, :tree [], :change {[0 0] _}, :freeze #{}}\n      ((q))\n\n      (! (assoc empty-event\n           :change {[0 0] (Failure. (dbg/ex-info* \"1\" {} \"064710fe-35bb-4dc6-bfdf-667702434acd\" nil))}))\n      (q) := {:acks 1, :tree [], :change {}, :freeze #{}}\n      ((q))\n      )))\n"]}