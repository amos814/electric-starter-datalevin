{"version":3,"sources":["missionary/impl/Sleep.cljs"],"mappings":";AAGA,AAAA,AACA,AAAA;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,+CAAA,WAAAA,1DAASU;;AAAT,AAAA,IAAAT,SAAA;AAAA,AAAA,IAAAC,WAAA,CAAA,AAAA,mBAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAD;;;;AAAA,MAAA,KAAAE,MAAA,CAAA,8DAAA,CAAA,AAAA,mBAAA;;;;;AAAA,CAAA,AAAA,gDAAA,WAAAF,OAAAG,lEAASM;;AAAT,AAAA,IAAAT,aAAA;AAAA,AAAA,OAAA,AAAAA,sBAAAA,WAAA,AAAA,CAAAA,mBAAA,AAAAI,iBAAAD;;;AAAA,CAAA,AAAA,wEAAA,xEAASM;;AAAT,AAAA,QAAA,JAIYK;AAJZ,AAIe,QAACC,6DAAAA,gEAAAA,LAAOD,4CAAAA;;;AAJvB,CAAA,yCAAA,zCAASL;AAAT,AAAA,AAAA;;;AAAA,CAAA,+CAAA,/CAASA;;AAAT,CAAA,kDAAA,lDAASA;;AAAT,CAAA,uDAAA,WAAAJ,mBAAAC,qBAAAC,1GAASE;AAAT,AAAA,OAAAD,iBAAAF,qBAAA;;;AAAA;;;qCAAA,rCAASI,kFACNC,QAAQC,QACCC;AAFZ,AAAA,YAAAJ,8BACGE,QAAQC,QACCC;;;AAFHJ,AAMT,+BAAA,/BAAMM,sEAAiBD;AAAvB,AACE,oBAAM,AAAWA;AAAjB,AACE,aAAA,ZAAM,AAAWA;;AACjB,AAACE,aAAgB,AAAWF;;AAC5B,IAAAG,WAAe,KAAAE,qBAAA;IAAfD,eAAC,AAAWJ;AAAZ,AAAA,QAAAI,6CAAAA,2CAAAD,YAAAC,uBAAAD;;AAHF;;;AAKF,4BAAA,5BAAMG,gEAAKC,EAAEC,EAAER,EAAES;AAAjB,AACE,IAAMC,MAAI,qCAAA,KAAA,1CAACd,mCAAUa;AAArB,AACE,CAAM,AAAWC,cAAK,WAAA,XAACC;AAAD,AAAgB,AAAI,eAAA,dAAM,AAAWD;;AAAY,QAACV,kCAAAA,qCAAAA,LAAEQ,iBAAAA;GAAID;;AAAIG","names":["unused__11938__auto__","self__","G__40252","js/Error","args40251","cljs.core/aclone","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","missionary.impl.Sleep/Process","missionary.impl.Sleep/->Process","failure","handler","pending","s","missionary.impl.Sleep/cancel","js/clearTimeout","G__40277","fexpr__40276","js/missionary.Cancelled","missionary.impl.Sleep/run","d","x","f","slp","js/setTimeout"],"sourcesContent":["(ns missionary.impl.Sleep\n  (:import missionary.Cancelled))\n\n(declare cancel)\n(deftype Process\n  [failure handler\n   ^boolean pending]\n  IFn\n  (-invoke [s] (cancel s)))\n\n(defn cancel [^Process s]\n  (when (.-pending s)\n    (set! (.-pending s) false)\n    (js/clearTimeout (.-handler s))\n    ((.-failure s) (Cancelled. \"Sleep cancelled.\"))))\n\n(defn run [d x s f]\n  (let [slp (->Process f nil true)]\n    (set! (.-handler slp) (js/setTimeout #(do (set! (.-pending slp) false) (s x)) d)) slp))\n\n"]}